{"ast":null,"code":"'use strict';\n\nvar React = require('react');\n\nvar ReactDOM = require('react-dom');\n\nvar createClass = require('create-react-class');\n\nvar QuillMixin = require('./mixin');\n\nvar find = require('lodash/find');\n\nvar some = require('lodash/some');\n\nvar isEqual = require('lodash/isEqual');\n\nvar T = require('prop-types');\n\nvar DOM = require('react-dom-factories');\n\nvar QuillComponent = createClass({\n  displayName: 'Quill',\n  mixins: [QuillMixin],\n  propTypes: {\n    id: T.string,\n    className: T.string,\n    theme: T.string,\n    style: T.object,\n    readOnly: T.bool,\n    value: T.oneOfType([T.string, T.shape({\n      ops: T.array\n    })]),\n    defaultValue: T.oneOfType([T.string, T.shape({\n      ops: T.array\n    })]),\n    placeholder: T.string,\n    tabIndex: T.number,\n    bounds: T.oneOfType([T.string, T.element]),\n    onChange: T.func,\n    onChangeSelection: T.func,\n    onFocus: T.func,\n    onBlur: T.func,\n    onKeyPress: T.func,\n    onKeyDown: T.func,\n    onKeyUp: T.func,\n    preserveWhitespace: T.bool,\n    modules: function (props) {\n      var isNotObject = T.object.apply(this, arguments);\n      if (isNotObject) return isNotObject;\n      if (props.modules && props.modules.toolbar && props.modules.toolbar[0] && props.modules.toolbar[0].type) return new Error('Since v1.0.0, React Quill will not create a custom toolbar for you ' + 'anymore. Create a toolbar explictly, or let Quill create one. ' + 'See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100');\n    },\n    toolbar: function (props) {\n      if ('toolbar' in props) return new Error('The `toolbar` prop has been deprecated. Use `modules.toolbar` instead. ' + 'See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100');\n    },\n    formats: function (props) {\n      var isNotArrayOfString = T.arrayOf(T.string).apply(this, arguments);\n      if (isNotArrayOfString) return new Error('You cannot specify custom `formats` anymore. Use Parchment instead.  ' + 'See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100.');\n    },\n    styles: function (props) {\n      if ('styles' in props) return new Error('The `styles` prop has been deprecated. Use custom stylesheets instead. ' + 'See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100.');\n    },\n    pollInterval: function (props) {\n      if ('pollInterval' in props) return new Error('The `pollInterval` property does not have any effect anymore. ' + 'You can safely remove it from your props.' + 'See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100.');\n    },\n    children: function (props) {\n      // Validate that the editor has only one child element and it is not a <textarea>\n      var isNotASingleElement = T.element.apply(this, arguments);\n      if (isNotASingleElement) return new Error('The Quill editing area can only be composed of a single React element.');\n\n      if (React.Children.count(props.children)) {\n        var child = React.Children.only(props.children);\n        if (child.type === 'textarea') return new Error('Quill does not support editing on a <textarea>. Use a <div> instead.');\n      }\n    }\n  },\n\n  /*\r\n  Changing one of these props should cause a full re-render.\r\n  */\n  dirtyProps: ['modules', 'formats', 'bounds', 'theme', 'children'],\n\n  /*\r\n  Changing one of these props should cause a regular update.\r\n  */\n  cleanProps: ['id', 'className', 'style', 'placeholder', 'tabIndex', 'onChange', 'onChangeSelection', 'onFocus', 'onBlur', 'onKeyPress', 'onKeyDown', 'onKeyUp'],\n  getDefaultProps: function () {\n    return {\n      theme: 'snow',\n      modules: {}\n    };\n  },\n\n  /*\r\n  We consider the component to be controlled if `value` is being sent in props.\r\n  */\n  isControlled: function () {\n    return 'value' in this.props;\n  },\n  getInitialState: function () {\n    return {\n      generation: 0,\n      value: this.isControlled() ? this.props.value : this.props.defaultValue\n    };\n  },\n  componentWillReceiveProps: function (nextProps, nextState) {\n    var editor = this.editor; // If the component is unmounted and mounted too quickly\n    // an error is thrown in setEditorContents since editor is\n    // still undefined. Must check if editor is undefined\n    // before performing this call.\n\n    if (!editor) return; // Update only if we've been passed a new `value`.\n    // This leaves components using `defaultValue` alone.\n\n    if ('value' in nextProps) {\n      var currentContents = this.getEditorContents();\n      var nextContents = nextProps.value;\n      if (nextContents === this.lastDeltaChangeSet) throw new Error('You are passing the `delta` object from the `onChange` event back ' + 'as `value`. You most probably want `editor.getContents()` instead. ' + 'See: https://github.com/zenoamaro/react-quill#using-deltas'); // NOTE: Seeing that Quill is missing a way to prevent\n      //       edits, we have to settle for a hybrid between\n      //       controlled and uncontrolled mode. We can't prevent\n      //       the change, but we'll still override content\n      //       whenever `value` differs from current state.\n      // NOTE: Comparing an HTML string and a Quill Delta will always trigger \n      //       a change, regardless of whether they represent the same document.\n\n      if (!this.isEqualValue(nextContents, currentContents)) {\n        this.setEditorContents(editor, nextContents);\n      }\n    } // We can update readOnly state in-place.\n\n\n    if ('readOnly' in nextProps) {\n      if (nextProps.readOnly !== this.props.readOnly) {\n        this.setEditorReadOnly(editor, nextProps.readOnly);\n      }\n    } // If we need to regenerate the component, we can avoid a detailed\n    // in-place update step, and just let everything rerender.\n\n\n    if (this.shouldComponentRegenerate(nextProps, nextState)) {\n      return this.regenerate();\n    }\n  },\n  componentDidMount: function () {\n    this.editor = this.createEditor(this.getEditingArea(), this.getEditorConfig()); // Restore editor from Quill's native formats in regeneration scenario\n\n    if (this.quillDelta) {\n      this.editor.setContents(this.quillDelta);\n      this.editor.setSelection(this.quillSelection);\n      this.editor.focus();\n      this.quillDelta = this.quillSelection = null;\n      return;\n    }\n\n    if (this.state.value) {\n      this.setEditorContents(this.editor, this.state.value);\n      return;\n    }\n  },\n  componentWillUnmount: function () {\n    var editor;\n\n    if (editor = this.getEditor()) {\n      this.unhookEditor(editor);\n      this.editor = null;\n    }\n  },\n  shouldComponentUpdate: function (nextProps, nextState) {\n    var self = this; // If the component has been regenerated, we already know we should update.\n\n    if (this.state.generation !== nextState.generation) {\n      return true;\n    } // Compare props that require React updating the DOM.\n\n\n    return some(this.cleanProps, function (prop) {\n      // Note that `isEqual` compares deeply, making it safe to perform\n      // non-immutable updates, at the cost of performance.\n      return !isEqual(nextProps[prop], self.props[prop]);\n    });\n  },\n  shouldComponentRegenerate: function (nextProps, nextState) {\n    var self = this; // Whenever a `dirtyProp` changes, the editor needs reinstantiation.\n\n    return some(this.dirtyProps, function (prop) {\n      // Note that `isEqual` compares deeply, making it safe to perform\n      // non-immutable updates, at the cost of performance.\n      return !isEqual(nextProps[prop], self.props[prop]);\n    });\n  },\n\n  /*\r\n  If we could not update settings from the new props in-place, we have to tear\r\n  down everything and re-render from scratch.\r\n  */\n  componentWillUpdate: function (nextProps, nextState) {\n    if (this.state.generation !== nextState.generation) {\n      this.componentWillUnmount();\n    }\n  },\n  componentDidUpdate: function (prevProps, prevState) {\n    if (this.state.generation !== prevState.generation) {\n      this.componentDidMount();\n    }\n  },\n  getEditorConfig: function () {\n    return {\n      bounds: this.props.bounds,\n      formats: this.props.formats,\n      modules: this.props.modules,\n      placeholder: this.props.placeholder,\n      readOnly: this.props.readOnly,\n      scrollingContainer: this.props.scrollingContainer,\n      tabIndex: this.props.tabIndex,\n      theme: this.props.theme\n    };\n  },\n  getEditor: function () {\n    return this.editor;\n  },\n  getEditingArea: function () {\n    return ReactDOM.findDOMNode(this.editingArea);\n  },\n  getEditorContents: function () {\n    return this.state.value;\n  },\n  getEditorSelection: function () {\n    return this.state.selection;\n  },\n\n  /*\r\n  True if the value is a Delta instance or a Delta look-alike.\r\n  */\n  isDelta: function (value) {\n    return value && value.ops;\n  },\n\n  /*\r\n  Special comparison function that knows how to compare Deltas.\r\n  */\n  isEqualValue: function (value, nextValue) {\n    if (this.isDelta(value) && this.isDelta(nextValue)) {\n      return isEqual(value.ops, nextValue.ops);\n    } else {\n      return isEqual(value, nextValue);\n    }\n  },\n\n  /*\r\n  Regenerating the editor will cause the whole tree, including the container,\r\n  to be cleaned up and re-rendered from scratch.\r\n  */\n  regenerate: function () {\n    // Cache selection and contents in Quill's native format to be restored later\n    this.quillDelta = this.editor.getContents();\n    this.quillSelection = this.editor.getSelection();\n    this.setState({\n      generation: this.state.generation + 1\n    });\n  },\n\n  /*\r\n  Renders an editor area, unless it has been provided one to clone.\r\n  */\n  renderEditingArea: function () {\n    var self = this;\n    var children = this.props.children;\n    var preserveWhitespace = this.props.preserveWhitespace;\n    var properties = {\n      key: this.state.generation,\n      tabIndex: this.props.tabIndex,\n      ref: function (element) {\n        self.editingArea = element;\n      }\n    };\n    var customElement = React.Children.count(children) ? React.Children.only(children) : null;\n    var defaultElement = preserveWhitespace ? DOM.pre : DOM.div;\n    var editingArea = customElement ? React.cloneElement(customElement, properties) : defaultElement(properties);\n    return editingArea;\n  },\n  render: function () {\n    return DOM.div({\n      id: this.props.id,\n      style: this.props.style,\n      key: this.state.generation,\n      className: ['quill'].concat(this.props.className).join(' '),\n      onKeyPress: this.props.onKeyPress,\n      onKeyDown: this.props.onKeyDown,\n      onKeyUp: this.props.onKeyUp\n    }, this.renderEditingArea());\n  },\n  onEditorChangeText: function (value, delta, source, editor) {\n    var currentContents = this.getEditorContents(); // We keep storing the same type of value as what the user gives us,\n    // so that value comparisons will be more stable and predictable.\n\n    var nextContents = this.isDelta(currentContents) ? editor.getContents() : editor.getHTML();\n\n    if (!this.isEqualValue(nextContents, currentContents)) {\n      // Taint this `delta` object, so we can recognize whether the user\n      // is trying to send it back as `value`, preventing a likely loop.\n      this.lastDeltaChangeSet = delta;\n      this.setState({\n        value: nextContents\n      });\n\n      if (this.props.onChange) {\n        this.props.onChange(value, delta, source, editor);\n      }\n    }\n  },\n  onEditorChangeSelection: function (nextSelection, source, editor) {\n    var currentSelection = this.getEditorSelection();\n    var hasGainedFocus = !currentSelection && nextSelection;\n    var hasLostFocus = currentSelection && !nextSelection;\n\n    if (isEqual(nextSelection, currentSelection)) {\n      return;\n    }\n\n    this.setState({\n      selection: nextSelection\n    });\n\n    if (this.props.onChangeSelection) {\n      this.props.onChangeSelection(nextSelection, source, editor);\n    }\n\n    if (hasGainedFocus && this.props.onFocus) {\n      this.props.onFocus(nextSelection, source, editor);\n    } else if (hasLostFocus && this.props.onBlur) {\n      this.props.onBlur(currentSelection, source, editor);\n    }\n  },\n  focus: function () {\n    this.editor.focus();\n  },\n  blur: function () {\n    this.setEditorSelection(this.editor, null);\n  }\n});\nmodule.exports = QuillComponent;","map":{"version":3,"sources":["D:/Documents/HKII_2020_2021/Tieu_Luan_CN/code/tlcn/client/node_modules/react-quill/lib/component.js"],"names":["React","require","ReactDOM","createClass","QuillMixin","find","some","isEqual","T","DOM","QuillComponent","displayName","mixins","propTypes","id","string","className","theme","style","object","readOnly","bool","value","oneOfType","shape","ops","array","defaultValue","placeholder","tabIndex","number","bounds","element","onChange","func","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp","preserveWhitespace","modules","props","isNotObject","apply","arguments","toolbar","type","Error","formats","isNotArrayOfString","arrayOf","styles","pollInterval","children","isNotASingleElement","Children","count","child","only","dirtyProps","cleanProps","getDefaultProps","isControlled","getInitialState","generation","componentWillReceiveProps","nextProps","nextState","editor","currentContents","getEditorContents","nextContents","lastDeltaChangeSet","isEqualValue","setEditorContents","setEditorReadOnly","shouldComponentRegenerate","regenerate","componentDidMount","createEditor","getEditingArea","getEditorConfig","quillDelta","setContents","setSelection","quillSelection","focus","state","componentWillUnmount","getEditor","unhookEditor","shouldComponentUpdate","self","prop","componentWillUpdate","componentDidUpdate","prevProps","prevState","scrollingContainer","findDOMNode","editingArea","getEditorSelection","selection","isDelta","nextValue","getContents","getSelection","setState","renderEditingArea","properties","key","ref","customElement","defaultElement","pre","div","cloneElement","render","concat","join","onEditorChangeText","delta","source","getHTML","onEditorChangeSelection","nextSelection","currentSelection","hasGainedFocus","hasLostFocus","blur","setEditorSelection","module","exports"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nvar React = require('react');\r\nvar ReactDOM = require('react-dom');\r\nvar createClass = require('create-react-class');\r\nvar QuillMixin = require('./mixin');\r\nvar find = require('lodash/find');\r\nvar some = require('lodash/some');\r\nvar isEqual = require('lodash/isEqual');\r\nvar T = require('prop-types');\r\nvar DOM = require('react-dom-factories');\r\n\r\nvar QuillComponent = createClass({\r\n\r\n\tdisplayName: 'Quill',\r\n\r\n\tmixins: [ QuillMixin ],\r\n\r\n\tpropTypes: {\r\n\t\tid: T.string,\r\n\t\tclassName: T.string,\r\n\t\ttheme: T.string,\r\n\t\tstyle: T.object,\r\n\t\treadOnly: T.bool,\r\n\t\tvalue: T.oneOfType([T.string, T.shape({ops: T.array})]),\r\n\t\tdefaultValue: T.oneOfType([T.string, T.shape({ops: T.array})]),\r\n\t\tplaceholder: T.string,\r\n\t\ttabIndex: T.number,\r\n\t\tbounds: T.oneOfType([T.string, T.element]),\r\n\t\tonChange: T.func,\r\n\t\tonChangeSelection: T.func,\r\n\t\tonFocus: T.func,\r\n\t\tonBlur: T.func,\r\n\t\tonKeyPress: T.func,\r\n\t\tonKeyDown: T.func,\r\n\t\tonKeyUp: T.func,\r\n\t\tpreserveWhitespace: T.bool,\r\n\r\n\t\tmodules: function(props) {\r\n\t\t\tvar isNotObject = T.object.apply(this, arguments);\r\n\t\t\tif (isNotObject) return isNotObject;\r\n\r\n\t\t\tif (\r\n\t\t\t\tprops.modules && \r\n\t\t\t\tprops.modules.toolbar &&\r\n\t\t\t\tprops.modules.toolbar[0] &&\r\n\t\t\t\tprops.modules.toolbar[0].type\r\n\t\t\t) return new Error(\r\n\t\t\t\t'Since v1.0.0, React Quill will not create a custom toolbar for you ' +\r\n\t\t\t\t'anymore. Create a toolbar explictly, or let Quill create one. ' +\r\n\t\t\t\t'See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100'\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\ttoolbar: function(props) {\r\n\t\t\tif ('toolbar' in props) return new Error(\r\n\t\t\t\t'The `toolbar` prop has been deprecated. Use `modules.toolbar` instead. ' +\r\n\t\t\t\t'See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100'\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tformats: function(props) {\r\n\t\t\tvar isNotArrayOfString = T.arrayOf(T.string).apply(this, arguments);\r\n\r\n\t\t\tif (isNotArrayOfString) return new Error(\r\n\t\t\t\t'You cannot specify custom `formats` anymore. Use Parchment instead.  ' +\r\n\t\t\t\t'See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100.'\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tstyles: function(props) {\r\n\t\t\tif ('styles' in props) return new Error(\r\n\t\t\t\t'The `styles` prop has been deprecated. Use custom stylesheets instead. ' +\r\n\t\t\t\t'See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100.'\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tpollInterval: function(props) {\r\n\t\t\tif ('pollInterval' in props) return new Error(\r\n\t\t\t\t'The `pollInterval` property does not have any effect anymore. ' +\r\n\t\t\t\t'You can safely remove it from your props.' +\r\n\t\t\t\t'See: https://github.com/zenoamaro/react-quill#upgrading-to-react-quill-v100.'\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tchildren: function(props) {\r\n\t\t\t// Validate that the editor has only one child element and it is not a <textarea>\r\n\t\t\tvar isNotASingleElement = T.element.apply(this, arguments);\r\n\t\t\tif (isNotASingleElement) return new Error(\r\n\t\t\t\t'The Quill editing area can only be composed of a single React element.'\r\n\t\t\t);\r\n\r\n\t\t\tif (React.Children.count(props.children)) {\r\n\t\t\t\tvar child = React.Children.only(props.children);\r\n\t\t\t\tif (child.type === 'textarea') return new Error(\r\n\t\t\t\t\t'Quill does not support editing on a <textarea>. Use a <div> instead.'\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\t\r\n\t/*\r\n\tChanging one of these props should cause a full re-render.\r\n\t*/\r\n\tdirtyProps: [\r\n\t\t'modules',\r\n\t\t'formats',\r\n\t\t'bounds',\r\n\t\t'theme',\r\n\t\t'children',\r\n\t],\r\n\r\n\t/*\r\n\tChanging one of these props should cause a regular update.\r\n\t*/\r\n\tcleanProps: [\r\n\t\t'id',\r\n\t\t'className',\r\n\t\t'style',\r\n\t\t'placeholder',\r\n\t\t'tabIndex',\r\n\t\t'onChange',\r\n\t\t'onChangeSelection',\r\n\t\t'onFocus',\r\n\t\t'onBlur',\r\n\t\t'onKeyPress',\r\n\t\t'onKeyDown',\r\n\t\t'onKeyUp',\r\n\t],\r\n\r\n\tgetDefaultProps: function() {\r\n\t\treturn {\r\n\t\t\ttheme: 'snow',\r\n\t\t\tmodules: {},\r\n\t\t};\r\n\t},\r\n\r\n\t/*\r\n\tWe consider the component to be controlled if `value` is being sent in props.\r\n\t*/\r\n\tisControlled: function() {\r\n\t\treturn 'value' in this.props;\r\n\t},\r\n\r\n\tgetInitialState: function() {\r\n\t\treturn {\r\n\t\t\tgeneration: 0,\r\n\t\t\tvalue: this.isControlled()\r\n\t\t\t\t? this.props.value\r\n\t\t\t\t: this.props.defaultValue\r\n\t\t};\r\n\t},\r\n\r\n\tcomponentWillReceiveProps: function(nextProps, nextState) {\r\n\t\tvar editor = this.editor;\r\n\r\n\t\t// If the component is unmounted and mounted too quickly\r\n\t\t// an error is thrown in setEditorContents since editor is\r\n\t\t// still undefined. Must check if editor is undefined\r\n\t\t// before performing this call.\r\n\t\tif (!editor) return;\r\n\t\t\r\n\t\t// Update only if we've been passed a new `value`.\r\n\t\t// This leaves components using `defaultValue` alone.\r\n\t\tif ('value' in nextProps) {\r\n\t\t\tvar currentContents = this.getEditorContents();\r\n\t\t\tvar nextContents = nextProps.value;\r\n\r\n\t\t\tif (nextContents === this.lastDeltaChangeSet) throw new Error(\r\n\t\t\t\t'You are passing the `delta` object from the `onChange` event back ' +\r\n\t\t\t\t'as `value`. You most probably want `editor.getContents()` instead. ' +\r\n\t\t\t\t'See: https://github.com/zenoamaro/react-quill#using-deltas'\r\n\t\t\t);\r\n\r\n\t\t\t// NOTE: Seeing that Quill is missing a way to prevent\r\n\t\t\t//       edits, we have to settle for a hybrid between\r\n\t\t\t//       controlled and uncontrolled mode. We can't prevent\r\n\t\t\t//       the change, but we'll still override content\r\n\t\t\t//       whenever `value` differs from current state.\r\n\t\t\t// NOTE: Comparing an HTML string and a Quill Delta will always trigger \r\n\t\t\t//       a change, regardless of whether they represent the same document.\r\n\t\t\tif (!this.isEqualValue(nextContents, currentContents)) {\r\n\t\t\t\tthis.setEditorContents(editor, nextContents);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// We can update readOnly state in-place.\r\n\t\tif ('readOnly' in nextProps) {\r\n\t\t\tif (nextProps.readOnly !== this.props.readOnly) {\r\n\t\t\t\tthis.setEditorReadOnly(editor, nextProps.readOnly);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If we need to regenerate the component, we can avoid a detailed\r\n\t\t// in-place update step, and just let everything rerender.\r\n\t\tif (this.shouldComponentRegenerate(nextProps, nextState)) {\r\n\t\t\treturn this.regenerate();\r\n\t\t}\r\n\t},\r\n\r\n\tcomponentDidMount: function() {\r\n\t\tthis.editor = this.createEditor(\r\n\t\t\tthis.getEditingArea(),\r\n\t\t\tthis.getEditorConfig()\r\n\t\t);\r\n\t\t// Restore editor from Quill's native formats in regeneration scenario\r\n\t\tif (this.quillDelta) {\r\n\t\t\tthis.editor.setContents(this.quillDelta);\r\n\t\t\tthis.editor.setSelection(this.quillSelection);\t\t\r\n\t\t\tthis.editor.focus();\r\n\t\t\tthis.quillDelta = this.quillSelection = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.state.value) {\r\n\t\t\tthis.setEditorContents(this.editor, this.state.value);\r\n\t\t\treturn;\r\n\t\t}\r\n\t},\r\n\r\n\tcomponentWillUnmount: function() {\r\n\t\tvar editor; if ((editor = this.getEditor())) {\r\n\t\t\tthis.unhookEditor(editor);\r\n\t\t\tthis.editor = null;\r\n\t\t}\r\n\t},\r\n\r\n\tshouldComponentUpdate: function(nextProps, nextState) {\r\n\t\tvar self = this;\r\n\r\n\t\t// If the component has been regenerated, we already know we should update.\r\n\t\tif (this.state.generation !== nextState.generation) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\t// Compare props that require React updating the DOM.\r\n\t\treturn some(this.cleanProps, function(prop) {\r\n\t\t\t// Note that `isEqual` compares deeply, making it safe to perform\r\n\t\t\t// non-immutable updates, at the cost of performance.\r\n\t\t\treturn !isEqual(nextProps[prop], self.props[prop]);\r\n\t\t});\r\n\t},\r\n\r\n\tshouldComponentRegenerate: function(nextProps, nextState) {\r\n\t\tvar self = this;\r\n\t\t// Whenever a `dirtyProp` changes, the editor needs reinstantiation.\r\n\t\treturn some(this.dirtyProps, function(prop) {\r\n\t\t\t// Note that `isEqual` compares deeply, making it safe to perform\r\n\t\t\t// non-immutable updates, at the cost of performance.\r\n\t\t\treturn !isEqual(nextProps[prop], self.props[prop]);\r\n\t\t});\r\n\t},\r\n\r\n\t/*\r\n\tIf we could not update settings from the new props in-place, we have to tear\r\n\tdown everything and re-render from scratch.\r\n\t*/\r\n\tcomponentWillUpdate: function(nextProps, nextState) {\r\n\t\tif (this.state.generation !== nextState.generation) {\r\n\t\t\tthis.componentWillUnmount();\r\n\t\t}\r\n\t},\r\n\r\n\tcomponentDidUpdate: function(prevProps, prevState) {\r\n\t\tif (this.state.generation !== prevState.generation) {\r\n\t\t\tthis.componentDidMount();\r\n\t\t}\r\n\t},\r\n\r\n\tgetEditorConfig: function() {\r\n\t\treturn {\r\n\t\t\tbounds:       this.props.bounds,\r\n\t\t\tformats:      this.props.formats,\r\n\t\t\tmodules:      this.props.modules,\r\n\t\t\tplaceholder:  this.props.placeholder,\r\n\t\t\treadOnly:     this.props.readOnly,\r\n      \t\t\tscrollingContainer: this.props.scrollingContainer,\r\n\t\t\ttabIndex:     this.props.tabIndex,\r\n\t\t\ttheme:        this.props.theme,\r\n\t\t};\r\n\t},\r\n\r\n\tgetEditor: function() {\r\n\t\treturn this.editor;\r\n\t},\r\n\r\n\tgetEditingArea: function () {\r\n\t\treturn ReactDOM.findDOMNode(this.editingArea);\r\n\t},\r\n\r\n\tgetEditorContents: function() {\r\n\t\treturn this.state.value;\r\n\t},\r\n\r\n\tgetEditorSelection: function() {\r\n\t\treturn this.state.selection;\r\n\t},\r\n\r\n\t/*\r\n\tTrue if the value is a Delta instance or a Delta look-alike.\r\n\t*/\r\n\tisDelta: function(value) {\r\n\t\treturn value && value.ops;\r\n\t},\r\n\r\n\t/*\r\n\tSpecial comparison function that knows how to compare Deltas.\r\n\t*/\r\n\tisEqualValue: function(value, nextValue) {\r\n\t\tif (this.isDelta(value) && this.isDelta(nextValue)) {\r\n\t\t\treturn isEqual(value.ops, nextValue.ops);\r\n\t\t} else {\r\n\t\t\treturn isEqual(value, nextValue);\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\tRegenerating the editor will cause the whole tree, including the container,\r\n\tto be cleaned up and re-rendered from scratch.\r\n\t*/\r\n\tregenerate: function() {\r\n\t\t// Cache selection and contents in Quill's native format to be restored later\r\n\t\tthis.quillDelta = this.editor.getContents();\r\n\t\tthis.quillSelection = this.editor.getSelection();\r\n\t\tthis.setState({\r\n\t\t\tgeneration: this.state.generation + 1,\r\n\t\t});\r\n\t},\r\n\r\n\t/*\r\n\tRenders an editor area, unless it has been provided one to clone.\r\n\t*/\r\n\trenderEditingArea: function() {\r\n\t\tvar self = this;\r\n\t\tvar children = this.props.children;\r\n\t\tvar preserveWhitespace = this.props.preserveWhitespace;\r\n\r\n\t\tvar properties = {\r\n\t\t\tkey: this.state.generation,\r\n\t\t\ttabIndex: this.props.tabIndex,\r\n\t\t\tref: function(element) { self.editingArea = element },\r\n\t\t};\r\n\r\n\t\tvar customElement = React.Children.count(children)\r\n\t\t\t? React.Children.only(children)\r\n\t\t\t: null;\r\n\t\tvar defaultElement = preserveWhitespace ? DOM.pre : DOM.div;\r\n\t\tvar editingArea = customElement\r\n\t\t\t? React.cloneElement(customElement, properties)\r\n\t\t\t: defaultElement(properties);\r\n\r\n\t\treturn editingArea;\r\n\t},\r\n\r\n\trender: function() {\r\n\t\treturn DOM.div({\r\n\t\t\tid: this.props.id,\r\n\t\t\tstyle: this.props.style,\r\n\t\t\tkey: this.state.generation,\r\n\t\t\tclassName: ['quill'].concat(this.props.className).join(' '),\r\n\t\t\tonKeyPress: this.props.onKeyPress,\r\n\t\t\tonKeyDown: this.props.onKeyDown,\r\n\t\t\tonKeyUp: this.props.onKeyUp },\r\n\t\t\tthis.renderEditingArea()\r\n\t\t);\r\n\t},\r\n\r\n\tonEditorChangeText: function(value, delta, source, editor) {\r\n\t\tvar currentContents = this.getEditorContents();\r\n\r\n\t\t// We keep storing the same type of value as what the user gives us,\r\n\t\t// so that value comparisons will be more stable and predictable.\r\n\t\tvar nextContents = this.isDelta(currentContents)\r\n\t\t\t? editor.getContents()\r\n\t\t\t: editor.getHTML();\r\n\t\t\r\n\t\tif (!this.isEqualValue(nextContents, currentContents)) {\r\n\t\t\t// Taint this `delta` object, so we can recognize whether the user\r\n\t\t\t// is trying to send it back as `value`, preventing a likely loop.\r\n\t\t\tthis.lastDeltaChangeSet = delta;\r\n\r\n\t\t\tthis.setState({ value: nextContents });\r\n\r\n\t\t\tif (this.props.onChange) {\r\n\t\t\t\tthis.props.onChange(value, delta, source, editor);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tonEditorChangeSelection: function(nextSelection, source, editor) {\r\n\t\tvar currentSelection = this.getEditorSelection();\r\n\t\tvar hasGainedFocus = !currentSelection && nextSelection;\r\n\t\tvar hasLostFocus = currentSelection && !nextSelection;\r\n\r\n\t\tif (isEqual(nextSelection, currentSelection)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({ selection: nextSelection });\r\n\t\t\r\n\t\tif (this.props.onChangeSelection) {\r\n\t\t\tthis.props.onChangeSelection(nextSelection, source, editor);\r\n\t\t}\r\n\r\n\t\tif (hasGainedFocus && this.props.onFocus) {\r\n\t\t\tthis.props.onFocus(nextSelection, source, editor);\r\n\t\t} else if (hasLostFocus && this.props.onBlur) {\r\n\t\t\tthis.props.onBlur(currentSelection, source, editor);\r\n\t\t}\r\n\t},\r\n\r\n\tfocus: function() {\r\n\t\tthis.editor.focus();\r\n\t},\r\n\r\n\tblur: function() {\r\n\t\tthis.setEditorSelection(this.editor, null);\r\n\t}\r\n\r\n});\r\n\r\nmodule.exports = QuillComponent;\r\n"]},"metadata":{},"sourceType":"script"}