{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documents\\\\HKII_2020_2021\\\\Tieu_Luan_CN\\\\code\\\\tlcn\\\\client\\\\src\\\\components\\\\mainpages\\\\posts\\\\FilterPost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect } from 'react';\nimport { GlobalState } from '../../../GlobalState';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction FilterPost() {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [topics] = state.topicsAPI.topics;\n  const [filter, setFilter] = state.myPostsAPI.filter;\n  const [all, setALL] = state.myPostsAPI.all;\n  const [numPostByTopic, setNumPostByTopic] = state.myPostsAPI.numPostByTopic;\n  const [location, setLocation] = state.userAPI.location;\n  useEffect(() => {\n    return () => {\n      if (localStorage.getItem('text')) {\n        const text = localStorage.getItem('text');\n        console.log({\n          text\n        });\n        setFilter(text);\n        console.log({\n          filter\n        });\n      }\n    };\n  });\n\n  const handleFilter = async text => {\n    if (location !== '/news') {\n      localStorage.setItem('text', text);\n      window.location.href = \"/news\";\n    } else if (location === '/news') {\n      localStorage.removeItem('text');\n      setFilter(text);\n      console.log({\n        filter\n      });\n      console.log({\n        text\n      });\n    }\n  };\n  /*     const handleFilterAll = async (text) => {\r\n          if(location === '/news')\r\n          {\r\n              localStorage.removeItem('text')\r\n              setFilter(text)\r\n              console.log({filter})\r\n              console.log({text})\r\n          }\r\n      } */\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"mt-20 text-4xl\",\n      children: \"Chuy\\xEAn m\\u1EE5c\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"px-4 py-6 bg-white rounded-lg shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        onClick: () => handleFilter(\"\"),\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"px-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            className: \"flex items-center text-gray-600 cursor-pointer\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"inline-block h-4 w-4 bg-pink-400 mr-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 21\n            }, this), \"T\\u1EA5t c\\u1EA3 b\\xE0i vi\\u1EBFt\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500 ml-auto\",\n              children: [all, \" b\\xE0i vi\\u1EBFt\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"text-gray-500 bx bx-right-arrow-alt ml-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), topics.map(topic => /*#__PURE__*/_jsxDEV(Link, {\n        onClick: () => handleFilter(\"?topic=\" + topic._id),\n        value: \"topic=\" + topic._id,\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"px-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            className: \"flex items-center text-gray-600 cursor-pointer\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"inline-block h-4 w-4 bg-pink-400 mr-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 30\n            }, this), topic.name, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500 ml-auto\",\n              value: topic._id,\n              children: [numPostByTopic.find(_ => _._id === topic._id) && numPostByTopic.find(_ => _._id === topic._id).count || 0, \" b\\xE0i vi\\u1EBFt\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 30\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"text-gray-500 bx bx-right-arrow-alt ml-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)\n      }, topic._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(FilterPost, \"Aoi8HvyL58l/TH6/w/HCAkolOe0=\");\n\n_c = FilterPost;\nexport default FilterPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"FilterPost\");","map":{"version":3,"sources":["D:/Documents/HKII_2020_2021/Tieu_Luan_CN/code/tlcn/client/src/components/mainpages/posts/FilterPost.js"],"names":["React","useContext","useEffect","GlobalState","Link","FilterPost","state","topics","topicsAPI","filter","setFilter","myPostsAPI","all","setALL","numPostByTopic","setNumPostByTopic","location","setLocation","userAPI","localStorage","getItem","text","console","log","handleFilter","setItem","window","href","removeItem","map","topic","_id","name","find","_","count"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,UAAd,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAAQC,WAAR,QAA0B,sBAA1B;AACA,SAASC,IAAT,QAAqB,kBAArB;;;;AAEA,SAASC,UAAT,GAAsB;AAAA;;AAClB,QAAMC,KAAK,GAAGL,UAAU,CAACE,WAAD,CAAxB;AACA,QAAM,CAACI,MAAD,IAAWD,KAAK,CAACE,SAAN,CAAgBD,MAAjC;AACA,QAAM,CAACE,MAAD,EAASC,SAAT,IAAsBJ,KAAK,CAACK,UAAN,CAAiBF,MAA7C;AACA,QAAM,CAACG,GAAD,EAAMC,MAAN,IAAgBP,KAAK,CAACK,UAAN,CAAiBC,GAAvC;AACA,QAAM,CAACE,cAAD,EAAiBC,iBAAjB,IAAsCT,KAAK,CAACK,UAAN,CAAiBG,cAA7D;AACA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0BX,KAAK,CAACY,OAAN,CAAcF,QAA9C;AAIAd,EAAAA,SAAS,CAAC,MAAI;AACN,WAAM,MAAI;AACN,UAAGiB,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAH,EAAgC;AAC5B,cAAMC,IAAI,GAAGF,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAY;AAACF,UAAAA;AAAD,SAAZ;AACAX,QAAAA,SAAS,CAACW,IAAD,CAAT;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY;AAACd,UAAAA;AAAD,SAAZ;AACH;AAER,KARG;AASP,GAVQ,CAAT;;AAaA,QAAMe,YAAY,GAAG,MAAOH,IAAP,IAAgB;AACjC,QAAGL,QAAQ,KAAK,OAAhB,EACA;AACIG,MAAAA,YAAY,CAACM,OAAb,CAAqB,MAArB,EAA6BJ,IAA7B;AACAK,MAAAA,MAAM,CAACV,QAAP,CAAgBW,IAAhB,GAAuB,OAAvB;AACH,KAJD,MAKK,IAAGX,QAAQ,KAAK,OAAhB,EAAwB;AACzBG,MAAAA,YAAY,CAACS,UAAb,CAAwB,MAAxB;AACAlB,MAAAA,SAAS,CAACW,IAAD,CAAT;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY;AAACd,QAAAA;AAAD,OAAZ;AACAa,MAAAA,OAAO,CAACC,GAAR,CAAY;AAACF,QAAAA;AAAD,OAAZ;AACH;AAEJ,GAbD;AAeJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI,sBACI;AAAA,4BACA;AAAI,MAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADA,eAEA;AAAI,MAAA,SAAS,EAAC,yCAAd;AAAA,8BACA,QAAC,IAAD;AAAM,QAAA,OAAO,EAAE,MAAMG,YAAY,CAAC,EAAD,CAAjC;AAAA,+BACI;AAAI,UAAA,SAAS,EAAC,wFAAd;AAAA,iCACI,QAAC,IAAD;AAAM,YAAA,SAAS,EAAC,gDAAhB;AAAA,oCACI;AAAM,cAAA,SAAS,EAAC;AAAhB;AAAA;AAAA;AAAA;AAAA,oBADJ,oDAGI;AAAM,cAAA,SAAS,EAAC,uBAAhB;AAAA,yBAAyCZ,GAAzC;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ,eAII;AAAG,cAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADA,EAaIL,MAAM,CAACsB,GAAP,CAAWC,KAAK,iBACZ,QAAC,IAAD;AAAM,QAAA,OAAO,EAAE,MAAMN,YAAY,CAAC,YAAUM,KAAK,CAACC,GAAjB,CAAjC;AAAyD,QAAA,KAAK,EAAE,WAAWD,KAAK,CAACC,GAAjF;AAAA,+BACI;AAAI,UAAA,SAAS,EAAC,wFAAd;AAAA,iCACI,QAAC,IAAD;AAAM,YAAA,SAAS,EAAC,gDAAhB;AAAA,oCACK;AAAM,cAAA,SAAS,EAAC;AAAhB;AAAA;AAAA;AAAA;AAAA,oBADL,EAESD,KAAK,CAACE,IAFf,eAGK;AAAM,cAAA,SAAS,EAAC,uBAAhB;AAAwC,cAAA,KAAK,EAAEF,KAAK,CAACC,GAArD;AAAA,yBAA2DjB,cAAc,CAACmB,IAAf,CAAoBC,CAAC,IAAEA,CAAC,CAACH,GAAF,KAAUD,KAAK,CAACC,GAAvC,KAA+CjB,cAAc,CAACmB,IAAf,CAAoBC,CAAC,IAAEA,CAAC,CAACH,GAAF,KAAUD,KAAK,CAACC,GAAvC,EAA4CI,KAA3F,IAAoG,CAA/J;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHL,eAIK;AAAG,cAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,oBAJL;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ,SAA2FL,KAAK,CAACC,GAAjG;AAAA;AAAA;AAAA;AAAA,cADJ,CAbJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFA;AAAA,kBADJ;AAgCH;;GA/EQ1B,U;;KAAAA,U;AAiFT,eAAeA,UAAf","sourcesContent":["import React,{useContext,useEffect} from 'react';\r\nimport {GlobalState} from '../../../GlobalState'\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction FilterPost() {\r\n    const state = useContext(GlobalState)\r\n    const [topics] = state.topicsAPI.topics\r\n    const [filter, setFilter] = state.myPostsAPI.filter\r\n    const [all, setALL] = state.myPostsAPI.all\r\n    const [numPostByTopic, setNumPostByTopic] = state.myPostsAPI.numPostByTopic\r\n    const [location, setLocation] = state.userAPI.location\r\n\r\n    \r\n\r\n    useEffect(()=>{\r\n            return()=>{\r\n                if(localStorage.getItem('text')){\r\n                    const text = localStorage.getItem('text')\r\n                    console.log({text})\r\n                    setFilter(text)\r\n                    console.log({filter})\r\n                }\r\n\r\n        }\r\n    })\r\n\r\n\r\n    const handleFilter = async (text) => {\r\n        if(location !== '/news')\r\n        {\r\n            localStorage.setItem('text', text)\r\n            window.location.href = \"/news\";\r\n        }\r\n        else if(location === '/news'){\r\n            localStorage.removeItem('text')\r\n            setFilter(text)\r\n            console.log({filter})\r\n            console.log({text})\r\n        }\r\n\r\n    }\r\n\r\n/*     const handleFilterAll = async (text) => {\r\n        if(location === '/news')\r\n        {\r\n            localStorage.removeItem('text')\r\n            setFilter(text)\r\n            console.log({filter})\r\n            console.log({text})\r\n        }\r\n    } */\r\n    return (\r\n        <>\r\n        <h1 className='mt-20 text-4xl'>Chuyên mục</h1>\r\n        <ul className=\"px-4 py-6 bg-white rounded-lg shadow-md\">\r\n        <Link onClick={() => handleFilter(\"\")}>\r\n            <li className=\"px-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300\">\r\n                <Link className=\"flex items-center text-gray-600 cursor-pointer\">\r\n                    <span className=\"inline-block h-4 w-4 bg-pink-400 mr-3\" />\r\n                    Tất cả bài viết\r\n                    <span className=\"text-gray-500 ml-auto\">{all} bài viết</span>\r\n                    <i className=\"text-gray-500 bx bx-right-arrow-alt ml-1\" />\r\n                </Link>\r\n           </li>\r\n        </Link>\r\n                            \r\n        {\r\n            topics.map(topic => (\r\n                <Link onClick={() => handleFilter(\"?topic=\"+topic._id)}  value={\"topic=\" + topic._id} key={topic._id}>\r\n                    <li className=\"px-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300\">\r\n                        <Link className=\"flex items-center text-gray-600 cursor-pointer\">\r\n                             <span className=\"inline-block h-4 w-4 bg-pink-400 mr-3\" />\r\n                                {topic.name}\r\n                             <span className=\"text-gray-500 ml-auto\" value={topic._id}>{numPostByTopic.find(_=>_._id === topic._id) && numPostByTopic.find(_=>_._id === topic._id).count || 0} bài viết</span>\r\n                             <i className=\"text-gray-500 bx bx-right-arrow-alt ml-1\" />\r\n                        </Link>\r\n                    </li>\r\n                </Link>\r\n            ))\r\n         }\r\n        </ul>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default FilterPost;"]},"metadata":{},"sourceType":"module"}