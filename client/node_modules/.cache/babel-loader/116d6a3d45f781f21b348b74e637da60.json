{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\tlcn1\\\\tlcn\\\\client\\\\src\\\\components\\\\mainpages\\\\cart\\\\cart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport { GlobalState } from '../../../GlobalState';\nimport axios from 'axios'; //import PaypalButton from './PaypalButton'\n\nimport { useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Cart() {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [cart, setCart] = state.userAPI.cart; //const [token] = state.token\n\n  const token = useSelector(state => state.token); //const [callback, setCallback] = state.userAPI.callback\n\n  const [total, setTotal] = useState(0);\n  useEffect(() => {\n    const getTotal = () => {\n      const total = cart.reduce((prev, item) => {\n        return prev + item.price * item.quantity;\n      }, 0);\n      setTotal(total);\n    };\n\n    getTotal();\n  }, [cart]);\n\n  const addToCart = async cart => {\n    await axios.patch('/user/addcart', {\n      cart\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n  };\n\n  const increment = id => {\n    cart.forEach(item => {\n      if (item._id === id) {\n        item.quantity += 1;\n      }\n    });\n    setCart([...cart]);\n    addToCart(cart);\n  };\n\n  const decrement = id => {\n    cart.forEach(item => {\n      if (item._id === id) {\n        item.quantity === 1 ? item.quantity = 1 : item.quantity -= 1;\n      }\n    });\n    setCart([...cart]);\n    addToCart();\n  };\n\n  const removeProduct = id => {\n    if (window.confirm(\"Do you want to delete this product?\")) {\n      cart.forEach((item, index) => {\n        if (item._id === id) {\n          cart.splice(index, 1);\n        }\n      });\n      setCart([...cart]);\n      addToCart(cart);\n    }\n  };\n\n  const tranSuccess = async payment => {\n    const {\n      paymentID,\n      address\n    } = payment;\n    await axios.post('/api/payment', {\n      cart,\n      paymentID,\n      address\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n    setCart([]);\n    addToCart([]);\n    console.log(\"test alert transucess\");\n    alert(\"You have successfully placed an order.\"); //setCallback(!callback)\n  }; // if(cart.length === 0) \n  //     return <h2 style={{textAlign: \"center\", fontSize: \"5rem\"}}>Cart Empty</h2> \n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-right\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"My Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          overflowX: \"auto\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          id: \"cart\",\n          class: \"table table-hover table-condensed\",\n          children: /*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                style: \"width:50%\",\n                children: \"Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: \"width:10%\",\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: \"width:8%\",\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: \"width:22%\",\n                class: \"text-center\",\n                children: \"Subtotal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: \"width:10%\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 32\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 20\n    }, this)\n  }, void 0, false);\n}\n\n_s(Cart, \"eeWbVJPQZOFCHqWvIK/0AGmgBqo=\", false, function () {\n  return [useSelector];\n});\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["C:/Users/Admin/Desktop/tlcn1/tlcn/client/src/components/mainpages/cart/cart.js"],"names":["React","useContext","useState","useEffect","GlobalState","axios","useSelector","Cart","state","cart","setCart","userAPI","token","total","setTotal","getTotal","reduce","prev","item","price","quantity","addToCart","patch","headers","Authorization","increment","id","forEach","_id","decrement","removeProduct","window","confirm","index","splice","tranSuccess","payment","paymentID","address","post","console","log","alert","overflowX"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,QAA3B,EAAqCC,SAArC,QAAqD,OAArD;AACA,SAAQC,WAAR,QAA0B,sBAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;AACA,SAAQC,WAAR,QAA0B,aAA1B;;;;AAEA,SAASC,IAAT,GAAgB;AAAA;;AACZ,QAAMC,KAAK,GAAGP,UAAU,CAACG,WAAD,CAAxB;AACA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBF,KAAK,CAACG,OAAN,CAAcF,IAAtC,CAFY,CAGZ;;AACA,QAAMG,KAAK,GAAGN,WAAW,CAACE,KAAK,IAAIA,KAAK,CAACI,KAAhB,CAAzB,CAJY,CAKZ;;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CAAC,CAAD,CAAlC;AAEAC,EAAAA,SAAS,CAAC,MAAK;AACX,UAAMY,QAAQ,GAAG,MAAK;AAClB,YAAMF,KAAK,GAAGJ,IAAI,CAACO,MAAL,CAAY,CAACC,IAAD,EAAOC,IAAP,KAAgB;AACtC,eAAOD,IAAI,GAAIC,IAAI,CAACC,KAAL,GAAaD,IAAI,CAACE,QAAjC;AACH,OAFa,EAEZ,CAFY,CAAd;AAIAN,MAAAA,QAAQ,CAACD,KAAD,CAAR;AACH,KAND;;AAQAE,IAAAA,QAAQ;AAEX,GAXQ,EAWP,CAACN,IAAD,CAXO,CAAT;;AAaC,QAAMY,SAAS,GAAG,MAAOZ,IAAP,IAAe;AAC9B,UAAMJ,KAAK,CAACiB,KAAN,CAAY,eAAZ,EAA6B;AAACb,MAAAA;AAAD,KAA7B,EAAqC;AACvCc,MAAAA,OAAO,EAAE;AAACC,QAAAA,aAAa,EAAEZ;AAAhB;AAD8B,KAArC,CAAN;AAGH,GAJA;;AAOD,QAAMa,SAAS,GAAIC,EAAD,IAAO;AACrBjB,IAAAA,IAAI,CAACkB,OAAL,CAAaT,IAAI,IAAI;AACjB,UAAGA,IAAI,CAACU,GAAL,KAAaF,EAAhB,EAAmB;AACfR,QAAAA,IAAI,CAACE,QAAL,IAAiB,CAAjB;AACH;AACJ,KAJD;AAMAV,IAAAA,OAAO,CAAC,CAAC,GAAGD,IAAJ,CAAD,CAAP;AACAY,IAAAA,SAAS,CAACZ,IAAD,CAAT;AACH,GATD;;AAWC,QAAMoB,SAAS,GAAIH,EAAD,IAAO;AACtBjB,IAAAA,IAAI,CAACkB,OAAL,CAAaT,IAAI,IAAI;AACjB,UAAGA,IAAI,CAACU,GAAL,KAAaF,EAAhB,EAAmB;AACfR,QAAAA,IAAI,CAACE,QAAL,KAAkB,CAAlB,GAAsBF,IAAI,CAACE,QAAL,GAAgB,CAAtC,GAA0CF,IAAI,CAACE,QAAL,IAAiB,CAA3D;AACH;AACJ,KAJD;AAMAV,IAAAA,OAAO,CAAC,CAAC,GAAGD,IAAJ,CAAD,CAAP;AACAY,IAAAA,SAAS;AACZ,GATA;;AAWF,QAAMS,aAAa,GAAIJ,EAAD,IAAO;AACxB,QAAGK,MAAM,CAACC,OAAP,CAAe,qCAAf,CAAH,EAAyD;AACrDvB,MAAAA,IAAI,CAACkB,OAAL,CAAa,CAACT,IAAD,EAAOe,KAAP,KAAiB;AAC1B,YAAGf,IAAI,CAACU,GAAL,KAAaF,EAAhB,EAAmB;AACfjB,UAAAA,IAAI,CAACyB,MAAL,CAAYD,KAAZ,EAAmB,CAAnB;AACH;AACJ,OAJD;AAMAvB,MAAAA,OAAO,CAAC,CAAC,GAAGD,IAAJ,CAAD,CAAP;AACAY,MAAAA,SAAS,CAACZ,IAAD,CAAT;AACH;AACJ,GAXF;;AAaA,QAAM0B,WAAW,GAAG,MAAMC,OAAN,IAAkB;AACjC,UAAM;AAACC,MAAAA,SAAD;AAAYC,MAAAA;AAAZ,QAAuBF,OAA7B;AAEA,UAAM/B,KAAK,CAACkC,IAAN,CAAW,cAAX,EAA2B;AAAC9B,MAAAA,IAAD;AAAO4B,MAAAA,SAAP;AAAkBC,MAAAA;AAAlB,KAA3B,EAAuD;AACzDf,MAAAA,OAAO,EAAE;AAACC,QAAAA,aAAa,EAAEZ;AAAhB;AADgD,KAAvD,CAAN;AAIAF,IAAAA,OAAO,CAAC,EAAD,CAAP;AACAW,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAC,IAAAA,KAAK,CAAC,wCAAD,CAAL,CAViC,CAYjC;AACH,GAbF,CA/Da,CA+ER;AACA;;;AAEA,sBACI;AAAA,2BACO;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,8BACY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADZ,eAGY;AAAK,QAAA,KAAK,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SAAZ;AAAA,+BACA;AAAO,UAAA,EAAE,EAAC,MAAV;AAAiB,UAAA,KAAK,EAAC,mCAAvB;AAAA,iCACK;AAAA,mCACI;AAAA,sCACI;AAAI,gBAAA,KAAK,EAAC,WAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAI,gBAAA,KAAK,EAAC,WAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAGI;AAAI,gBAAA,KAAK,EAAC,UAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHJ,eAII;AAAI,gBAAA,KAAK,EAAC,WAAV;AAAsB,gBAAA,KAAK,EAAC,aAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJJ,eAKI;AAAI,gBAAA,KAAK,EAAC;AAAV;AAAA;AAAA;AAAA;AAAA,sBALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADL;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AADP,mBADJ;AAsDI;;GAxIHpC,I;UAISD,W;;;KAJTC,I;AA0IT,eAAeA,IAAf","sourcesContent":["import React, {useContext, useState, useEffect} from 'react'\r\nimport {GlobalState} from '../../../GlobalState'\r\nimport axios from 'axios'\r\n//import PaypalButton from './PaypalButton'\r\nimport {useSelector} from 'react-redux'\r\n\r\nfunction Cart() {\r\n    const state = useContext(GlobalState)\r\n    const [cart, setCart] = state.userAPI.cart\r\n    //const [token] = state.token\r\n    const token = useSelector(state => state.token)\r\n    //const [callback, setCallback] = state.userAPI.callback\r\n    const [total, setTotal] = useState(0)\r\n\r\n    useEffect(() =>{\r\n        const getTotal = () =>{\r\n            const total = cart.reduce((prev, item) => {\r\n                return prev + (item.price * item.quantity)\r\n            },0)\r\n\r\n            setTotal(total)\r\n        }\r\n\r\n        getTotal()\r\n\r\n    },[cart])\r\n\r\n     const addToCart = async (cart) =>{\r\n        await axios.patch('/user/addcart', {cart}, {\r\n            headers: {Authorization: token}\r\n        })\r\n    } \r\n\r\n\r\n    const increment = (id) =>{\r\n        cart.forEach(item => {\r\n            if(item._id === id){\r\n                item.quantity += 1\r\n            }\r\n        })\r\n\r\n        setCart([...cart])\r\n        addToCart(cart)\r\n    }\r\n\r\n     const decrement = (id) =>{\r\n        cart.forEach(item => {\r\n            if(item._id === id){\r\n                item.quantity === 1 ? item.quantity = 1 : item.quantity -= 1\r\n            }\r\n        })\r\n\r\n        setCart([...cart])\r\n        addToCart()\r\n    }\r\n\r\n   const removeProduct = (id) =>{\r\n        if(window.confirm(\"Do you want to delete this product?\")){\r\n            cart.forEach((item, index) => {\r\n                if(item._id === id){\r\n                    cart.splice(index, 1)\r\n                }\r\n            })\r\n\r\n            setCart([...cart])\r\n            addToCart(cart)\r\n        }\r\n    }\r\n\r\n   const tranSuccess = async(payment) => {\r\n        const {paymentID, address} = payment;\r\n\r\n        await axios.post('/api/payment', {cart, paymentID, address}, {\r\n            headers: {Authorization: token}\r\n        })\r\n\r\n        setCart([])\r\n        addToCart([])\r\n        console.log(\"test alert transucess\")\r\n        alert(\"You have successfully placed an order.\")\r\n\r\n        //setCallback(!callback)\r\n    }\r\n\r\n\r\n        // if(cart.length === 0) \r\n        //     return <h2 style={{textAlign: \"center\", fontSize: \"5rem\"}}>Cart Empty</h2> \r\n\r\n        return (\r\n            <>\r\n                   <div className=\"col-right\">\r\n                               <h2>My Cart</h2>\r\n           \r\n                               <div style={{overflowX: \"auto\"}}>\r\n                               <table id=\"cart\" class=\"table table-hover table-condensed\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th style=\"width:50%\">Product</th>\r\n                                            <th style=\"width:10%\">Price</th>\r\n                                            <th style=\"width:8%\">Quantity</th>\r\n                                            <th style=\"width:22%\" class=\"text-center\">Subtotal</th>\r\n                                            <th style=\"width:10%\"></th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    {/* <tbody>\r\n                                        <tr>\r\n                                            <td data-th=\"Product\">\r\n                                                <div class=\"row\">\r\n                                                    <div class=\"col-sm-2 hidden-xs\"><img src=\"http://placehold.it/100x100\" alt=\"...\" class=\"img-responsive\"/></div>\r\n                                                    <div class=\"col-sm-10\">\r\n                                                        <h4 class=\"nomargin\">Product 1</h4>\r\n                                                        <p>Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Lorem ipsum dolor sit amet.</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </td>\r\n                                            <td data-th=\"Price\">$1.99</td>\r\n                                            <td data-th=\"Quantity\">\r\n                                                <input type=\"number\" class=\"form-control text-center\" value=\"1\"  />\r\n                                            </td>\r\n                                            <td data-th=\"Subtotal\" class=\"text-center\">1.99</td>\r\n                                            <td class=\"actions\" data-th=\"\">\r\n                                                <button class=\"btn btn-info btn-sm\"><i class=\"fa fa-refresh\"></i></button>\r\n                                                <button class=\"btn btn-danger btn-sm\"><i class=\"fa fa-trash-o\"></i></button>\t\t\t\t\t\t\t\t\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                    <tfoot>\r\n                                        <tr class=\"visible-xs\">\r\n                                            <td class=\"text-center\"><strong>Total 1.99</strong></td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td><a href=\"#\" class=\"btn btn-warning\"><i class=\"fa fa-angle-left\"></i> Continue Shopping</a></td>\r\n                                            <td colspan=\"2\" class=\"hidden-xs\"></td>\r\n                                            <td class=\"hidden-xs text-center\"><strong>Total $1.99</strong></td>\r\n                                            <td><a href=\"#\" class=\"btn btn-success btn-block\">Checkout <i class=\"fa fa-angle-right\"></i></a></td>\r\n                                        </tr>\r\n                                    </tfoot> */}\r\n                                 </table>\r\n                               </div>\r\n                        </div>\r\n                   </>\r\n               );\r\n           }\r\n\r\nexport default Cart\r\n"]},"metadata":{},"sourceType":"module"}