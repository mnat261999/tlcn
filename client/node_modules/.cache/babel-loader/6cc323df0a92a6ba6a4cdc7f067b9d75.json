{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MyPC\\\\Desktop\\\\tlcn\\\\client\\\\src\\\\components\\\\mainpages\\\\auth\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport BreadCrumb from '../BreadCumb';\nimport { Link, useHistory } from 'react-router-dom';\nimport { showErrMsg, showSuccessMsg } from '../utils/notification/Notification';\nimport axios from 'axios';\nimport { dispatchLogin } from '../../redux/actions/authAction';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { GlobalState } from '../../../GlobalState';\nimport { GoogleLogin } from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  email: '',\n  password: '',\n  err: '',\n  success: ''\n};\n\nfunction Login() {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [user, setUser] = useState(initialState);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const {\n    email,\n    password,\n    err,\n    success\n  } = user;\n  const token = useSelector(state => state.token);\n\n  const handleChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setUser({ ...user,\n      [name]: value,\n      err: '',\n      success: ''\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post('/user/login', {\n        email,\n        password\n      });\n      showSuccessMsg('success', res.data.msg); //setUser({...user, err: '', success: res.data.msg})\n\n      localStorage.setItem('firstLogin', true);\n      dispatch(dispatchLogin());\n      history.push(\"/\");\n    } catch (err) {\n      console.log(err.response);\n      err.response.data.msg && setUser({ ...user,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  const responseGoogle = async response => {\n    try {\n      const res = await axios.post('/user/google_login', {\n        tokenId: response.tokenId\n      });\n      showSuccessMsg('success', res.data.msg); //setUser({...user, error:'', success: res.data.msg})\n\n      localStorage.setItem('firstLogin', true);\n      dispatch(dispatchLogin());\n      history.push('/');\n    } catch (err) {\n      err.response.data.msg && setUser({ ...user,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  const responseFacebook = async response => {\n    try {\n      const {\n        accessToken,\n        userID\n      } = response;\n      const res = await axios.post('/user/facebook_login', {\n        accessToken,\n        userID\n      });\n      showSuccessMsg('success', res.data.msg); //setUser({...user, error:'', success: res.data.msg})\n\n      localStorage.setItem('firstLogin', true);\n      dispatch(dispatchLogin());\n      history.push('/');\n    } catch (err) {\n      err.response.data.msg && setUser({ ...user,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"body\",\n      children: [err && showErrMsg('error', err), success && showSuccessMsg('success', success), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-form w3_form\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login w3_login\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"login-header w3_header\",\n            children: \"\\u0110\\u0103ng nh\\u1EADp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w3l_grid\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"login-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleSubmit,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    placeholder: \"Email\",\n                    id: \"email\",\n                    value: email,\n                    name: \"email\",\n                    onChange: handleChangeInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 99,\n                    columnNumber: 30\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"password\",\n                    placeholder: \"M\\u1EADt kh\\u1EA9u\",\n                    id: \"password\",\n                    value: password,\n                    name: \"password\",\n                    onChange: handleChangeInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 30\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"submit\",\n                    type: \"submit\",\n                    children: \"\\u0110\\u0103ng nh\\u1EADp\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 30\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"second-section w3_section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bottom-header w3_bottom\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"Ho\\u1EB7c\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"social-links w3_social\",\n                  children: [/*#__PURE__*/_jsxDEV(GoogleLogin, {\n                    clientId: \"435855610791-bpm8fma33403onru00s417ic9eqhj6r7.apps.googleusercontent.com\",\n                    buttonText: \"Login with google\",\n                    onSuccess: responseGoogle,\n                    cookiePolicy: 'single_host_origin',\n                    render: renderProps => /*#__PURE__*/_jsxDEV(Link, {\n                      onClick: renderProps.onClick,\n                      disabled: renderProps.disabled,\n                      className: \"googleplus\",\n                      href: \"#\",\n                      target: \"blank\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        class: \"fab fa-google\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 125,\n                        columnNumber: 116\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(FacebookLogin, {\n                    appId: \"826486697916876\",\n                    autoLoad: false,\n                    fields: \"name,email,picture\",\n                    callback: responseFacebook,\n                    render: renderProps => /*#__PURE__*/_jsxDEV(Link, {\n                      onClick: renderProps.onClick,\n                      className: \"facebook\",\n                      href: \"#\",\n                      target: \"blank\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        class: \"fab fa-facebook-f\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 134,\n                        columnNumber: 115\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 134,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 30\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bottom-text w3_bottom_text\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"N\\u1EBFu ch\\u01B0a c\\xF3 t\\xE0i kho\\u1EA3n?\", /*#__PURE__*/_jsxDEV(Link, {\n                    to: \"/register\",\n                    children: \"\\u0110\\u0103ng k\\xFD\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 54\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: \"/forgot_password\",\n                    children: \"Qu\\xEAn m\\u1EADt kh\\u1EA9u?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(Login, \"7pNhND56L3kMsnYUZ5itbK8Yay8=\", false, function () {\n  return [useDispatch, useHistory, useSelector];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/MyPC/Desktop/tlcn/client/src/components/mainpages/auth/Login.js"],"names":["React","useState","useContext","BreadCrumb","Link","useHistory","showErrMsg","showSuccessMsg","axios","dispatchLogin","useDispatch","useSelector","GlobalState","GoogleLogin","FacebookLogin","initialState","email","password","err","success","Login","state","user","setUser","dispatch","history","token","handleChangeInput","e","name","value","target","handleSubmit","preventDefault","res","post","data","msg","localStorage","setItem","push","console","log","response","responseGoogle","tokenId","responseFacebook","accessToken","userID","renderProps","onClick","disabled"],"mappings":"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","sourcesContent":["import React, {useState,useContext} from 'react';\r\nimport BreadCrumb from '../BreadCumb'\r\nimport {Link, useHistory} from 'react-router-dom'\r\nimport {showErrMsg, showSuccessMsg} from '../utils/notification/Notification'\r\nimport axios from 'axios'\r\nimport {dispatchLogin} from '../../redux/actions/authAction'\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport {GlobalState} from '../../../GlobalState'\r\nimport { GoogleLogin } from 'react-google-login';\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\r\n\r\n\r\n\r\nconst initialState = {\r\n    email: '',\r\n    password: '',\r\n    err: '',\r\n    success: ''\r\n}\r\n\r\nfunction Login() {\r\n    const state = useContext(GlobalState)\r\n    const [user, setUser] = useState(initialState)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const {email, password, err, success} = user\r\n    const token = useSelector(state => state.token)\r\n\r\n    \r\n\r\n    const handleChangeInput = e => {\r\n        const {name, value} = e.target\r\n        setUser({...user, [name]:value, err: '', success: ''})\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault()\r\n        try {\r\n            const res = await axios.post('/user/login', {email, password})\r\n            showSuccessMsg('success',res.data.msg)\r\n            //setUser({...user, err: '', success: res.data.msg})\r\n\r\n            localStorage.setItem('firstLogin', true)\r\n            dispatch(dispatchLogin())\r\n            history.push(\"/\") \r\n\r\n        } catch (err) {\r\n            console.log(err.response)\r\n            err.response.data.msg && \r\n            setUser({...user, err: err.response.data.msg, success: ''})\r\n        }\r\n    }\r\n\r\n    const responseGoogle = async (response) => {\r\n        try {\r\n            const res = await axios.post('/user/google_login', {tokenId: response.tokenId})\r\n\r\n            showSuccessMsg('success',res.data.msg)\r\n\r\n            //setUser({...user, error:'', success: res.data.msg})\r\n            localStorage.setItem('firstLogin', true)\r\n\r\n            dispatch(dispatchLogin())\r\n            history.push('/')\r\n        } catch (err) {\r\n            err.response.data.msg && \r\n            setUser({...user, err: err.response.data.msg, success: ''})\r\n        }\r\n    }\r\n\r\n    const responseFacebook = async (response) => {\r\n        try {\r\n            const {accessToken, userID} = response\r\n            const res = await axios.post('/user/facebook_login', {accessToken, userID})\r\n\r\n            showSuccessMsg('success',res.data.msg)\r\n            //setUser({...user, error:'', success: res.data.msg})\r\n            localStorage.setItem('firstLogin', true)\r\n\r\n            dispatch(dispatchLogin())\r\n            history.push('/')\r\n        } catch (err) {\r\n            err.response.data.msg && \r\n            setUser({...user, err: err.response.data.msg, success: ''})\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n        <div className=\"body\">\r\n        {err && showErrMsg('error',err)}\r\n        {success && showSuccessMsg('success',success)}\r\n            <div className=\"login-form w3_form\">\r\n                <div className=\"login w3_login\">\r\n                <h2 className=\"login-header w3_header\">Đăng nhập</h2>\r\n                <div className=\"w3l_grid\">\r\n\r\n                    <div className=\"login-container\" >\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div><input type=\"text\" placeholder=\"Email\"  id=\"email\" value={email} name=\"email\" onChange={handleChangeInput}/></div>\r\n                        <div><input type=\"password\" placeholder=\"Mật khẩu\" id=\"password\" value={password} name=\"password\" onChange={handleChangeInput}/></div>\r\n                        <div><button className=\"submit\" type=\"submit\">Đăng nhập</button></div>\r\n                    </form>\r\n                    <div className=\"second-section w3_section\">\r\n                        <div className=\"bottom-header w3_bottom\">\r\n                            <h3>Hoặc</h3>\r\n                        </div>\r\n                        <div className=\"social-links w3_social\">\r\n{/*                             <ul>\r\n\r\n                            <li>\r\n                                <a className=\"facebook\" href=\"#\" target=\"blank\"><i className=\"fa fa-facebook\"/></a>\r\n                            </li>\r\n\r\n                            <li>\r\n                                <a className=\"googleplus\" href=\"#\" target=\"blank\"><i className=\"fa fa-google-plus\"/></a>\r\n                            </li>\r\n                            </ul> */}\r\n                            <GoogleLogin\r\n                                clientId=\"435855610791-bpm8fma33403onru00s417ic9eqhj6r7.apps.googleusercontent.com\"\r\n                                buttonText=\"Login with google\"\r\n                                onSuccess={responseGoogle}\r\n                                cookiePolicy={'single_host_origin'}\r\n                                render={renderProps => (\r\n                                    <Link onClick={renderProps.onClick}\r\n                                    disabled={renderProps.disabled} className=\"googleplus\" href=\"#\" target=\"blank\"><i class=\"fab fa-google\"></i></Link>\r\n                                  )}\r\n                            />\r\n                             <FacebookLogin\r\n                            appId=\"826486697916876\"\r\n                            autoLoad ={false}\r\n                            fields=\"name,email,picture\"\r\n                            callback={responseFacebook}       \r\n                            render={renderProps => (\r\n                                <Link  onClick={renderProps.onClick} className=\"facebook\" href=\"#\" target=\"blank\"><i class=\"fab fa-facebook-f\"></i></Link>\r\n                              )}               \r\n                            /> \r\n                        </div>\r\n                    </div>\r\n                    <div className=\"bottom-text w3_bottom_text\">\r\n                            <p>Nếu chưa có tài khoản?<Link to='/register'>Đăng ký</Link></p>\r\n                            <h4><Link to='/forgot_password'>Quên mật khẩu?</Link></h4>  \r\n                    </div>\r\n                    </div>\r\n\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}